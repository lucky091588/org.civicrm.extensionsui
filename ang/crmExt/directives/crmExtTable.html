<span crm-ui-order="{var: 'installedOrder', 'defaults': ['name'] }"></span>
<table class="display">
  <thead>
    <tr>
      <th><a href="" crm-ui-order-by="[installedOrder,'name']">{{ts('Extension')}}</a></th>
      <th><a href="" crm-ui-order-by="[installedOrder,'version']">{{ts('Version')}}</a></th>
      <th ng-if="(extContext === 'installed')"><a href="" crm-ui-order-by="[installedOrder,'status']">{{ts('Status')}}</a></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr
      ng-repeat="(key, extension) in extData | filter: hasDisplayStatus | orderBy:installedOrder.get()"
      ng-class="['crmExt-blockExtensionRow-status-' + extension.status, {'crmExt-blockExtensionRow-hasUpgrade': extension.getUpgradeVersion()}]"
      >
      <td class="crm-ext-name">
        <!-- todo: ng-click okay? encapsulate this in the directive instead? -->
        <span ng-click="showDetail(extension)" class="crmExt-detail-link">{{extension.name}}</span>
        <br/>{{extension.maintainer.author}} <span ng-if="(extension.maintainer.email.length)">({{extension.maintainer.email}})</span>
      </td>
      <td class="crm-ext-version">
        {{extension.version}}
      </td>
      <td class="crm-ext-status" ng-if="(extContext === 'installed')">
        {{extension.statusLabel}}
      </td>
      <td class="crm-ext-actionlinks">
        <a
          ng-if="(extension.status == 'uninstalled' || extension.status == 'remote')"
          class="action-item crm-hover-button"
          href=""
          crm-confirm="{message: ts('Install <em>%1 (%2)</em>?', {1: extension.name, 2: extension.key})}" on-yes="extension.lifecycle('install');"
          >
          {{ts('Install')}}
        </a>

        <a
          ng-if="(extension.status == 'disabled')"
          class="action-item crm-hover-button"
          href=""
          crm-confirm="{message: ts('Enable <em>%1 (%2)</em>?', {1: extension.name, 2: extension.key})}" on-yes="extension.lifecycle('enable');"
          >
          {{ts('Enable')}}
        </a>

        <a
          ng-if="(extension.status == 'disabled' || extension.status == 'disabled-missing')"
          class="action-item crm-hover-button" href=""
          crm-confirm="{message: ts('Completely uninstall <em>%1 (%2)</em>?', {1: extension.name, 2: extension.key})}" on-yes="extension.lifecycle('uninstall');"
          >
          {{ts('Uninstall')}}
        </a>

        <a
          ng-if="(extension.status == 'installed' || extension.status == 'installed-missing')"
          class="action-item crm-hover-button"
          href=""
          crm-confirm="{message: ts('Disable <em>%1 (%2)</em>?', {1: extension.name, 2: extension.key})}" on-yes="extension.lifecycle('disable');"
          >
          {{ts('Disable')}}
        </a>

        <a
          ng-if="extension.getUpgradeVersion()"
          class="action-item crm-hover-button"
          href=""
          crm-confirm="{message: ts('Upgrade <em>%1 (%2)</em>?', {1: extension.name, 2: extension.key})}" on-yes="extension.lifecycle('upgrade');">
            {{ts('Upgrade to %1', {1: extension.getUpgradeVersion()})}}
          </a>
      </td>
    </tr>
  </tbody>
</table>